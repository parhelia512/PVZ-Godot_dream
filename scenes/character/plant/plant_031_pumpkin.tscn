[gd_scene load_steps=19 format=3 uid="uid://ble8u0ri6sy6"]

[ext_resource type="PackedScene" uid="uid://c5cke4cm02um7" path="res://scenes/character/plant/plant_000_base.tscn" id="1_dvvog"]
[ext_resource type="Texture2D" uid="uid://r82fyw3sptg" path="res://assets/reanim/Pumpkin_back.png" id="2_ua2hr"]
[ext_resource type="Texture2D" uid="uid://cpvkl0j1s5bbe" path="res://assets/reanim/Pumpkin_front.png" id="3_ep6lu"]
[ext_resource type="Animation" uid="uid://crpcy55uglh0q" path="res://animation/character/plant/031_pumpkin/ALL_ANIMS.res" id="4_4j68l"]
[ext_resource type="Script" uid="uid://4o1wtnifn4tq" path="res://scripts/character/components/hp_component/component_hp_stage_change.gd" id="5_ep6lu"]
[ext_resource type="Script" uid="uid://jl0nl4a234bc" path="res://scripts/resources/resource_body_change.gd" id="6_4j68l"]
[ext_resource type="Texture2D" uid="uid://pk1kj7t44va0" path="res://assets/reanim/pumpkin_damage1.png" id="7_btwas"]
[ext_resource type="Texture2D" uid="uid://dgpnvemftf3h1" path="res://assets/reanim/Pumpkin_damage2.png" id="8_scv1d"]
[ext_resource type="Texture2D" uid="uid://bo1033fu5244l" path="res://assets/reanim/Pumpkin_damage3.png" id="9_3u6d4"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_btwas"]
size = Vector2(60, 50)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_btwas"]
radius = 40.0
height = 80.0

[sub_resource type="AnimationLibrary" id="AnimationLibrary_6x5pj"]
_data = {
&"ALL_ANIMS": ExtResource("4_4j68l")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rab88"]
animation = &"ALL_ANIMS"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_n8b18"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_bbrx8"]
graph_offset = Vector2(-118, 33)
nodes/Animation/node = SubResource("AnimationNodeAnimation_rab88")
nodes/Animation/position = Vector2(60, 100)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_n8b18")
nodes/TimeScale/position = Vector2(260, 120)
nodes/output/position = Vector2(460, 160)
node_connections = [&"TimeScale", 0, &"Animation", &"output", 0, &"TimeScale"]

[sub_resource type="Resource" id="Resource_sum7j"]
script = ExtResource("6_4j68l")
sprite_change = Array[NodePath]([NodePath("../Body/BodyCorrect/Pumpkin_front")])
sprite_change_texture = Array[Texture2D]([ExtResource("7_btwas")])
sprite_appear = Array[NodePath]([])
sprite_disappear = Array[NodePath]([])
node_drop = NodePath("")
metadata/_custom_type_script = "uid://jl0nl4a234bc"

[sub_resource type="Resource" id="Resource_hev76"]
script = ExtResource("6_4j68l")
sprite_change = Array[NodePath]([NodePath("../Body/BodyCorrect/Pumpkin_front")])
sprite_change_texture = Array[Texture2D]([ExtResource("8_scv1d")])
sprite_appear = Array[NodePath]([])
sprite_disappear = Array[NodePath]([])
node_drop = NodePath("")
metadata/_custom_type_script = "uid://jl0nl4a234bc"

[sub_resource type="Resource" id="Resource_e83t0"]
script = ExtResource("6_4j68l")
sprite_change = Array[NodePath]([NodePath("../Body/BodyCorrect/Pumpkin_front")])
sprite_change_texture = Array[Texture2D]([ExtResource("9_3u6d4")])
sprite_appear = Array[NodePath]([])
sprite_disappear = Array[NodePath]([])
node_drop = NodePath("")
metadata/_custom_type_script = "uid://jl0nl4a234bc"

[node name="Plant031Pumpkin" instance=ExtResource("1_dvvog")]
plant_type = 31

[node name="BodyCorrect" parent="Body" index="0"]
position = Vector2(-43, -66)

[node name="Anim_idle" type="Sprite2D" parent="Body/BodyCorrect" index="0"]
centered = false

[node name="Pumpkin_back" type="Sprite2D" parent="Body/BodyCorrect" index="1"]
z_index = -1
position = Vector2(-4.78979, 10.3627)
scale = Vector2(0.773711, 0.821831)
texture = ExtResource("2_ua2hr")
centered = false

[node name="Pumpkin_front" type="Sprite2D" parent="Body/BodyCorrect" index="2"]
position = Vector2(-5.28979, 10.3627)
scale = Vector2(0.773711, 0.821831)
texture = ExtResource("3_ep6lu")
centered = false

[node name="HpComponent" parent="." index="3"]
max_hp = 4000

[node name="CollisionShape2D" parent="BeAttackedBoxComponent/HurtBoxDetection" index="0"]
shape = SubResource("RectangleShape2D_btwas")

[node name="CollisionShape2D" parent="BeAttackedBoxComponent/HurtBoxReal" index="0"]
shape = SubResource("CapsuleShape2D_btwas")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="8"]
libraries = {
&"": SubResource("AnimationLibrary_6x5pj")
}

[node name="AnimationTree" type="AnimationTree" parent="." index="9"]
deterministic = false
tree_root = SubResource("AnimationNodeBlendTree_bbrx8")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")
parameters/TimeScale/scale = 1.0

[node name="HpStageChangeComponent" type="Node2D" parent="." index="10"]
script = ExtResource("5_ep6lu")
boundary_value_hp = Array[int]([3000, 2000, 1000, 0])
body_change = Array[ExtResource("6_4j68l")]([SubResource("Resource_sum7j"), SubResource("Resource_hev76"), SubResource("Resource_e83t0"), null])
