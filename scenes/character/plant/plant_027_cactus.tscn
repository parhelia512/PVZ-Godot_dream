[gd_scene load_steps=44 format=3 uid="uid://b401c4jy3m0xe"]

[ext_resource type="PackedScene" uid="uid://c5cke4cm02um7" path="res://scenes/character/plant/plant_000_base.tscn" id="1_vwoux"]
[ext_resource type="Texture2D" uid="uid://c4id572fbtjcy" path="res://assets/reanim/Cactus_flower.png" id="2_4xp4t"]
[ext_resource type="Script" uid="uid://cqowwxado0yfh" path="res://scripts/character/plant/plant_027_cactus.gd" id="2_d8wji"]
[ext_resource type="Texture2D" uid="uid://r4y81035oofv" path="res://assets/reanim/Cactus_flower_top.png" id="3_d8wji"]
[ext_resource type="Texture2D" uid="uid://c3f83wivxssqn" path="res://assets/reanim/Cactus_arm2_2.png" id="4_x7yu1"]
[ext_resource type="Texture2D" uid="uid://c384ifvkckv2d" path="res://assets/reanim/Cactus_arm2_1.png" id="5_j28og"]
[ext_resource type="Texture2D" uid="uid://cr1uypy7w05pj" path="res://assets/reanim/Cactus_body_overlay.png" id="6_t1voy"]
[ext_resource type="Texture2D" uid="uid://ju1655nhscjp" path="res://assets/reanim/Cactus_body1.png" id="7_v8tp1"]
[ext_resource type="Texture2D" uid="uid://tmjoaki8edq" path="res://assets/reanim/Cactus_arm1_2.png" id="8_dbqxx"]
[ext_resource type="Texture2D" uid="uid://081jwea20nvr" path="res://assets/reanim/Cactus_arm1_1.png" id="9_culdb"]
[ext_resource type="Texture2D" uid="uid://ks8bci2cs54t" path="res://assets/reanim/Cactus_mouth.png" id="10_bu7x2"]
[ext_resource type="Texture2D" uid="uid://e6qqqcdsskg1" path="res://assets/reanim/Cactus_lips.png" id="11_yhhlx"]
[ext_resource type="Texture2D" uid="uid://dync776p2d0w7" path="res://assets/reanim/Cactus_blink1.png" id="12_sgy8y"]
[ext_resource type="Animation" uid="uid://cegq7c7ee3bmy" path="res://animation/character/plant/027_cactus/Cactus_idle.tres" id="14_w3gco"]
[ext_resource type="Animation" uid="uid://dgygdw3pxpvfn" path="res://animation/character/plant/027_cactus/Cactus_idlehigh.tres" id="15_k5k33"]
[ext_resource type="Animation" uid="uid://cjffkc3jqsd1c" path="res://animation/character/plant/027_cactus/Cactus_lower.tres" id="16_macrd"]
[ext_resource type="Animation" uid="uid://b7gk2j4eajulu" path="res://animation/character/plant/027_cactus/Cactus_rise.tres" id="17_t2uod"]
[ext_resource type="Animation" uid="uid://cpi52n3bnf7a4" path="res://animation/character/plant/027_cactus/Cactus_shooting.tres" id="18_8qxhg"]
[ext_resource type="Animation" uid="uid://cjnf8plrqkeln" path="res://animation/character/plant/027_cactus/Cactus_shootinghigh.tres" id="19_hwi8p"]
[ext_resource type="Script" uid="uid://d3mb4q80urfqa" path="res://scripts/character/components/attack_behavior_component/component_attack_bullet_Cactus.gd" id="20_d8wji"]
[ext_resource type="Script" uid="uid://bafp0ax1lmlge" path="res://scripts/character/components/attack_ray_component/component_attack_ray.gd" id="22_j28og"]

[sub_resource type="AnimationLibrary" id="AnimationLibrary_s1mso"]
_data = {
&"Cactus_idle": ExtResource("14_w3gco"),
&"Cactus_idlehigh": ExtResource("15_k5k33"),
&"Cactus_lower": ExtResource("16_macrd"),
&"Cactus_rise": ExtResource("17_t2uod"),
&"Cactus_shooting": ExtResource("18_8qxhg"),
&"Cactus_shootinghigh": ExtResource("19_hwi8p")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_k2d6r"]
animation = &"Cactus_shootinghigh"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_s682d"]
animation = &"Cactus_idlehigh"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_kddwg"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_l5n13"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_qsbeo"]
graph_offset = Vector2(-36.6694, 116.405)
nodes/Animation/node = SubResource("AnimationNodeAnimation_s682d")
nodes/Animation/position = Vector2(286.671, 112.736)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_k2d6r")
"nodes/Animation 2/position" = Vector2(100, 380)
nodes/OneShot/node = SubResource("AnimationNodeOneShot_kddwg")
nodes/OneShot/position = Vector2(560, 120)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_l5n13")
nodes/TimeScale/position = Vector2(360, 320)
nodes/output/position = Vector2(800, 180)
node_connections = [&"OneShot", 0, &"Animation", &"OneShot", 1, &"TimeScale", &"TimeScale", 0, &"Animation 2", &"output", 0, &"OneShot"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_d6vb1"]
animation = &"Cactus_shooting"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5b508"]
animation = &"Cactus_idle"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_78ljg"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_xswiq"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_hpmc0"]
graph_offset = Vector2(-84.7, 24.9)
nodes/Animation/node = SubResource("AnimationNodeAnimation_5b508")
nodes/Animation/position = Vector2(194.872, 136.893)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_d6vb1")
"nodes/Animation 2/position" = Vector2(0, 360)
nodes/OneShot/node = SubResource("AnimationNodeOneShot_78ljg")
nodes/OneShot/position = Vector2(440, 140)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_xswiq")
nodes/TimeScale/position = Vector2(231.913, 330.155)
nodes/output/position = Vector2(660, 180)
node_connections = [&"OneShot", 0, &"Animation", &"OneShot", 1, &"TimeScale", &"TimeScale", 0, &"Animation 2", &"output", 0, &"OneShot"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5xufi"]
animation = &"Cactus_lower"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ro40r"]
animation = &"Cactus_rise"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pvo62"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2djsr"]
advance_mode = 2
advance_expression = "is_rise"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mlldu"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xyl7h"]
advance_mode = 2
advance_expression = "not is_rise"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cbv5h"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_ibdui"]
states/BlendTree/node = SubResource("AnimationNodeBlendTree_hpmc0")
states/BlendTree/position = Vector2(402, 65)
"states/BlendTree 2/node" = SubResource("AnimationNodeBlendTree_qsbeo")
"states/BlendTree 2/position" = Vector2(402, 237)
states/Cactus_lower/node = SubResource("AnimationNodeAnimation_5xufi")
states/Cactus_lower/position = Vector2(500, 152)
states/Cactus_rise/node = SubResource("AnimationNodeAnimation_ro40r")
states/Cactus_rise/position = Vector2(351, 152)
transitions = ["Start", "BlendTree", SubResource("AnimationNodeStateMachineTransition_pvo62"), "BlendTree", "Cactus_rise", SubResource("AnimationNodeStateMachineTransition_2djsr"), "Cactus_rise", "BlendTree 2", SubResource("AnimationNodeStateMachineTransition_mlldu"), "BlendTree 2", "Cactus_lower", SubResource("AnimationNodeStateMachineTransition_xyl7h"), "Cactus_lower", "BlendTree", SubResource("AnimationNodeStateMachineTransition_cbv5h")]
graph_offset = Vector2(66, -10)

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_5mthj"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_1mhlx"]
graph_offset = Vector2(-126.738, -59.2316)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_ibdui")
nodes/StateMachine/position = Vector2(80, 80)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_5mthj")
nodes/TimeScale/position = Vector2(480, 100)
nodes/output/position = Vector2(700, 140)
node_connections = [&"TimeScale", 0, &"StateMachine", &"output", 0, &"TimeScale"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x7yu1"]
size = Vector2(800, 5)

[node name="Plant027Cactus" instance=ExtResource("1_vwoux")]
script = ExtResource("2_d8wji")
is_rise = false
plant_type = 27

[node name="BodyCorrect" parent="Body" index="0"]
position = Vector2(-37, -66)

[node name="Cactus_flower" type="Sprite2D" parent="Body/BodyCorrect" index="0"]
position = Vector2(12.3179, -4.83574)
scale = Vector2(0.771196, 0.905064)
texture = ExtResource("2_4xp4t")
centered = false

[node name="Cactus_floer_top" type="Sprite2D" parent="Body/BodyCorrect" index="1"]
position = Vector2(21.8813, -9.53574)
rotation = 0.121319
scale = Vector2(0.8, 0.839643)
texture = ExtResource("3_d8wji")
centered = false

[node name="Cactus_floer_top2" type="Sprite2D" parent="Body/BodyCorrect" index="2"]
position = Vector2(16.0723, -5.29914)
rotation = 0.121319
scale = Vector2(0.5, 0.524821)
texture = ExtResource("3_d8wji")
centered = false

[node name="Cactus_floer_top3" type="Sprite2D" parent="Body/BodyCorrect" index="3"]
position = Vector2(17.4902, -10.3447)
rotation = 0.121319
scale = Vector2(0.55, 0.577277)
texture = ExtResource("3_d8wji")
centered = false

[node name="Cactus_arm2_2" type="Sprite2D" parent="Body/BodyCorrect" index="4"]
position = Vector2(52, 43.2634)
rotation = -0.0775442
scale = Vector2(0.803089, 0.840187)
skew = 0.0775442
texture = ExtResource("4_x7yu1")
centered = false

[node name="Cactus_body3" type="Sprite2D" parent="Body/BodyCorrect" index="5"]
visible = false
centered = false

[node name="Cactus_body2" type="Sprite2D" parent="Body/BodyCorrect" index="6"]
visible = false
centered = false

[node name="Cactus_arm2_1" type="Sprite2D" parent="Body/BodyCorrect" index="7"]
position = Vector2(53.6187, 30.3634)
rotation = -0.0486835
scale = Vector2(0.8, 0.840187)
texture = ExtResource("5_j28og")
centered = false

[node name="Body_overlay" type="Sprite2D" parent="Body/BodyCorrect" index="8"]
position = Vector2(17.4, 64.5)
scale = Vector2(0.8, 0.643)
texture = ExtResource("6_t1voy")
centered = false

[node name="Anim_face" type="Sprite2D" parent="Body/BodyCorrect" index="9"]
position = Vector2(9.5, 4.57234)
scale = Vector2(0.8, 0.840187)
texture = ExtResource("7_v8tp1")
centered = false

[node name="Cactus_arm1_2" type="Sprite2D" parent="Body/BodyCorrect" index="10"]
position = Vector2(2.65447, 38.1009)
rotation = 0.0783387
scale = Vector2(0.803089, 0.840187)
skew = -0.0783387
texture = ExtResource("8_dbqxx")
centered = false

[node name="Cactus_arm1_1" type="Sprite2D" parent="Body/BodyCorrect" index="11"]
position = Vector2(-7.52852, 12.2464)
rotation = 0.0620074
scale = Vector2(0.8, 0.840187)
texture = ExtResource("9_culdb")
centered = false

[node name="Cactus_mouth" type="Sprite2D" parent="Body/BodyCorrect" index="12"]
position = Vector2(48.5545, 22.7089)
rotation = -0.0640643
scale = Vector2(0.802089, 0.840187)
skew = 0.0640643
texture = ExtResource("10_bu7x2")
centered = false

[node name="Cactus_lips" type="Sprite2D" parent="Body/BodyCorrect" index="13"]
position = Vector2(49.6821, 16.0366)
rotation = -0.0593109
scale = Vector2(0.8, 0.840187)
texture = ExtResource("11_yhhlx")
centered = false

[node name="Cactus_blink" type="Sprite2D" parent="Body/BodyCorrect" index="14"]
visible = false
position = Vector2(24, 18)
scale = Vector2(0.8, 0.8)
texture = ExtResource("12_sgy8y")
centered = false

[node name="Cactus_blink2" type="Sprite2D" parent="Body/BodyCorrect" index="15"]
visible = false
position = Vector2(24, 15.662)
scale = Vector2(0.8, 0.8)
texture = ExtResource("12_sgy8y")
centered = false

[node name="Marker2DBullet" type="Marker2D" parent="Body/BodyCorrect" index="16"]
position = Vector2(56, 30)
scale = Vector2(0.5, 0.592593)

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="9"]
libraries = {
&"": SubResource("AnimationLibrary_s1mso")
}

[node name="AnimationTree" type="AnimationTree" parent="." index="10"]
deterministic = false
tree_root = SubResource("AnimationNodeBlendTree_1mhlx")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")
parameters/StateMachine/BlendTree/OneShot/active = false
parameters/StateMachine/BlendTree/OneShot/internal_active = false
parameters/StateMachine/BlendTree/OneShot/request = 0
parameters/StateMachine/BlendTree/TimeScale/scale = 3.0
"parameters/StateMachine/BlendTree 2/OneShot/active" = false
"parameters/StateMachine/BlendTree 2/OneShot/internal_active" = false
"parameters/StateMachine/BlendTree 2/OneShot/request" = 0
"parameters/StateMachine/BlendTree 2/TimeScale/scale" = 3.0
parameters/TimeScale/scale = 1.0

[node name="AttackComponent" type="Node2D" parent="." index="11" node_paths=PackedStringArray("markers_2d_bullet")]
script = ExtResource("20_d8wji")
attack_bullet_type = 7
markers_2d_bullet = [NodePath("../Body/BodyCorrect/Marker2DBullet")]

[node name="BulletAttackCdTimer" type="Timer" parent="AttackComponent" index="0"]

[node name="AttackRayComponent" type="Node2D" parent="AttackComponent" index="1"]
script = ExtResource("22_j28og")

[node name="Area2D" type="Area2D" parent="AttackComponent/AttackRayComponent" index="0"]
position = Vector2(0, -25)
collision_layer = 0
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackComponent/AttackRayComponent/Area2D" index="0"]
position = Vector2(400, 0)
shape = SubResource("RectangleShape2D_x7yu1")

[connection signal="timeout" from="AttackComponent/BulletAttackCdTimer" to="AttackComponent" method="_on_bullet_attack_cd_timer_timeout"]
